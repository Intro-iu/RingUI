// Implementation is in ui.hpp due to C++ template reasons.